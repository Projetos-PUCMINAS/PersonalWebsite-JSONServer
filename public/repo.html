<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../public/assets/css/repo.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <title>Repositório</title>
</head>
<body>
    <header class="cabecalho">
        <h1><a href="../public/index.html" target="_blank" class="logo">Marcos Alberto</a></h1>
        <nav class="menu">
            <ul>
                <li><a href="https://github.com/marcosffp" target="_blank">GitHub</a></li>
                <li><a id="repoHtmlUrl" href="" target="_blank">Repositório</a></li>
                <li><a href="https://www.linkedin.com/in/marcos-alberto-4502a6304?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app"
                        target="_blank">Linkedn</a></li>
            </ul>
        </nav>
    </header>

    <main class="main">
        <h2 id="repoName">Repositório: Cadê meu pet?</h2>
        <hr>
        <div class="descricao">
            <h3>Descrição</h3>
            <p id="repoDescription">Descrição do repositório</p>
        </div>

        <div class="detalhes">
            <div class="detalhe">
                <h3>Data de Criação</h3>
                <p id="repoCreatedAt">Data de criação do repositório</p>
            </div>

            <div class="icones">
                <div class="coracao">
                    <i class="fa-solid fa-heart fa-2x"></i>
                    <p id="stargazersCount">Número de estrelas</p>
                </div>

                <div class="compartilhados">
                    <i class="fa-solid fa-users fa-2x"></i>
                    <p id="watchersCount">Número de observadores</p>
                </div>
            </div>
        </div>

        <div class="linguagem">
            <h3>Linguagens de marcação, de estilo e de programação</h3>
            <p id="repoLanguages">Linguagens usadas no repositório</p>
        </div>

        <div class="acesso">
            <h3>Link de Acesso</h3>
            <a id="repoHtmlUrl" href="" target="_blank">Link do Repositório</a>
        </div>

        <div class="topicos">
            <h3>Tópicos</h3>
            <ul>

            </ul>
        </div>
    </main>

    <footer class="rodape">
        <hr>
        <p>Copyright &copy; 2024 Marcos Alberto Ferreira Pinto inc. Todos os direitos reservados.</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function getQueryParams() {
            const queryParams = {};
            window.location.search.replace(/^\?/, '').split('&').forEach(pair => {
                const [key, value] = pair.split('=');
                queryParams[key] = decodeURIComponent(value);
            });
            return queryParams;
        }

        function fillRepoDetails() {
            const queryParams = getQueryParams();
            document.getElementById('repoHtmlUrl').href = queryParams.html_url || "#";
            document.getElementById('repoHtmlUrl').innerText = "Repositório";
            document.getElementById('repoName').textContent = queryParams.name || 'Nome do Repositório';
            document.getElementById('repoDescription').textContent = queryParams.description || 'Descrição do repositório';
            document.getElementById('repoCreatedAt').innerText = queryParams.created_at || 'Data de criação do repositório';
            document.getElementById('stargazersCount').textContent = queryParams.stargazers_count || 'Número de estrelas';
            document.getElementById('watchersCount').textContent = queryParams.watchers_count || 'Número de observadores';
            document.getElementById('repoLanguages').textContent = queryParams.language || 'Linguagem não informada';

            const topicosUl = document.querySelector('.topicos ul');
            topicosUl.innerHTML = '';

            if (!queryParams.topicos || queryParams.topicos.length <= 0) {
                const topicosArray = queryParams.topicos.split(',');
                topicosArray.forEach(topic => {
                    const li = document.createElement('li');
                    li.textContent = topic;
                    topicosUl.appendChild(li);
                });
            } else {
                const li = document.createElement('li');
                li.textContent = 'Tópicos não informados';
                topicosUl.appendChild(li);
            }
        }

        document.addEventListener('DOMContentLoaded', fillRepoDetails);
    </script>
</body>

</html>